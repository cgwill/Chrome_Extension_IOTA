<html>
<head>
  <script src="node_modules/iota.lib.js/dist/iota.js"></script>
  <script src="curl.lib.js/dist/curl.lib.js"></script>
  <script>
  var iota = new IOTA({
      'provider': 'https://node.iotanode.host:443'
  });

  var curl = window.curl;
  // Make the PoW with curl.lib.js in browser

  try {
    curl.init();
    curl.overrideAttachToTangle(iota);
    console.log("overrideAttachToTangle was successfull");
  } catch (err){
    console.error("Error", err);
  }

  ///////////////////////////////////////////

  iota.api.getNodeInfo(function(error, success) {
    if (error) {
        console.error(error);
    } else {
        console.log(success);
    }
  });

  let seed = "VMGBBXOOX9PACPGJXUAWOQJSRA9XIAEHFHZPIZ9ZLB9OHTLLEL9CPTQSZJHZBDIVJEXXYZC9GRUMWLBDG";

  iota.api.getNewAddress(seed, function(err, res){
    if(!err){
      console.log(res);
    } else {
      console.log(err);
    }
  });

  let sendAddress = "EPOZCRHFAVLUVJQMGGSW9A9IANBEADEXZZBMTEPSMKVNCMUTRIEIHBQ9YVBWSBSHUAWGPKRGMLHQSJIID";

  // Compose the Message
  let messageTag = "FIRSTNULLTRANS";
  let messageToSend = "You have tipped this user!!";
  let messageTrytes = iota.utils.toTrytes(messageToSend);

  // Compose the Transfer
  let transfer = [{ "address" : sendAddress,
                    "value": 0,
                    "message" : messageTrytes,
                    "tag": messageTag}];

  iota.api.sendTransfer(seed, 4, 14, transfer, function(err, res) {if(!err){console.log(res);}else {console.log(err);}});

  </script>
</head>
<body>
  <button id="btn">click ME</button>
</body>
</html>
